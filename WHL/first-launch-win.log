# first launch and poweroff

acrn@debian:~/vm-win$ sudo ./launch_waag.sh 
[sudo] password for acrn: 
cpu1 online=1
cpu2 online=1
cpu3 online=1
logger: name=console, level=4
logger: name=kmsg, level=3
logger: name=disk, level=5
SW_LOAD: get ovmf path /usr/share/acrn/bios/OVMF.fd, size 0x200000
vm_create: post_vm_id1
VHM api version 1.0
vm_setup_memory: size=0x80000000
open hugetlbfs file /run/hugepage/acrn/huge_lv1/post_vm_id1/D279543825D611E8864ECB7A18B34643
open hugetlbfs file /run/hugepage/acrn/huge_lv2/post_vm_id1/D279543825D611E8864ECB7A18B34643
level 0 free/need pages:0/1 page size:0x200000
level 1 free/need pages:0/2 page size:0x40000000
to reserve more free pages:
to reserve pages (+orig 0): echo 2 > /sys/kernel/mm/hugepages/hugepages-1048576kB/nr_hugepages
to reserve pages (+orig 0): echo 1 > /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages
now enough free pages are reserved!

try to setup hugepage with:
    level 0 - lowmem 0x0, biosmem 0x200000, highmem 0x0
    level 1 - lowmem 0x80000000, biosmem 0x0, highmem 0x0
total_size 0x180000000

mmap ptr 0x0x7fc5e2b29000 -> baseaddr 0x0x7fc600000000
mmap 0x80000000@0x7fc600000000
touch 2 pages with pagesz 0x40000000
mmap 0x200000@0x7fc6ffe00000
touch 1 pages with pagesz 0x200000

really setup hugepage with:
    level 0 - lowmem 0x0, biosmem 0x200000, highmem 0x0
    level 1 - lowmem 0x80000000, biosmem 0x0, highmem 0x0
vm_init_vdevs
No correct pm notify channel given
start monitor interrupt data...
polling 37...
Listening 37...
pci init hostbridge
pci init lpc
pci init passthru
pci init passthru
pci init virtio-blk
pci init passthru
pci init igd-lpc
tpm: init_vtpm2:Invalid socket path!
                                    /tmp/dm.XBrbiAk     24:     Device (PCI0)
                                                                             Warning  3073 -        Multiple types ^  (Device object requires either a _HID or _ADR, but not both)

       /tmp/dm.XBrbiAk    771:     Processor (CPU0, 0x00, 0x00000000, 0x00) {}
                                                                              Warning  3168 -                          ^ Legacy Processor() keyword detected. Use Device() keyword instead.

                /tmp/dm.XBrbiAk    772:     Processor (CPU1, 0x01, 0x00000000, 0x00) {}
                                                                                       Warning  3168 -                          ^ Legacy Processor() keyword detected. Use Device() keyword instead.

                         acrn_sw_load
                                     SW_LOAD: partition blob /usr/share/acrn/bios/OVMF.fd size 2097152 copy to guest 0xffe00000
                                                                                                                               SW_LOAD: build e820 8 entries to addr: 0x7fc6000ef008
SW_LOAD: entry[0]: addr 0x0000000000000000, size 0x00000000000a0000,  type 0x1
SW_LOAD: entry[1]: addr 0x00000000000a0000, size 0x0000000000060000,  type 0x2
SW_LOAD: entry[2]: addr 0x0000000000100000, size 0x000000007ff00000,  type 0x1
SW_LOAD: entry[3]: addr 0x0000000080000000, size 0x0000000008000000,  type 0x2
SW_LOAD: entry[4]: addr 0x00000000db000000, size 0x0000000004000000,  type 0x2
SW_LOAD: entry[5]: addr 0x00000000df000000, size 0x0000000001000000,  type 0x2
SW_LOAD: entry[6]: addr 0x00000000e0000000, size 0x0000000020000000,  type 0x2
SW_LOAD: entry[7]: addr 0x0000000100000000, size 0x0000000040000000,  type 0x2
SW_LOAD: ovmf_entry 0xfffffff0
                              add_cpu
                                     vm_suspend: setting VM state to POWEROFF
                                                                             VM state changed from[ RUNNING ] to [ POWEROFF ]
                                                                                                                             failed: notify request finish
                                                                                                                                                          VM loop exit
                                                                                                                                                                      pci deinit hostbridge
                pci deinit lpc
                              pci deinit passthru
vm_reset_ptdev_intx:0x10-10, ioapic virpin=0.
pci deinit passthru
vm_reset_ptdev_intx:0x20-200, ioapic virpin=0.
pci deinit virtio-blk
pci deinit passthru
vm_reset_ptdev_intx:0xa0-a0, ioapic virpin=0.
pci deinit igd-lpc
mngr_client_new: Failed to accept from fd 37, err: Invalid argument
Stop listening 37...
Stop polling 37...
No correct pm notify channel given
